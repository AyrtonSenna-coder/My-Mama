<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
  <title>our story Â· mama & muffin ğŸ«€</title>
  <!-- Google Fonts + Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- AOS Scroll Animations -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <!-- Leaflet.js for Interactive Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <!-- Canvas Confetti -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Quicksand:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(145deg, #fff9f9 0%, #fff1f1 100%);
      color: #4a4a4a;
      overflow-x: hidden;
      transition: all 0.5s ease;
    }
    body.unlocked { overflow-y: auto; }
    body.locked { overflow-y: hidden; }
    h1, h2, h3 { font-family: 'Playfair Display', serif; }
    
    /* ===== HEARTBEAT ANIMATION ===== */
    @keyframes heartbeat {
      0% { transform: scale(1); }
      14% { transform: scale(1.15); }
      28% { transform: scale(1); }
      42% { transform: scale(1.15); }
      70% { transform: scale(1); }
      100% { transform: scale(1); }
    }
    .heartbeat {
      animation: heartbeat 2s ease-in-out infinite;
      display: inline-block;
    }
    
    @keyframes float {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0px); }
    }
    .floating { animation: float 6s ease-in-out infinite; }
    
    /* ===== FLOATING HEART PARTICLES ===== */
    .floating-heart {
      position: fixed;
      bottom: -50px;
      pointer-events: none;
      z-index: 1;
      animation: floatUp 8s linear forwards;
      color: rgba(255, 141, 161, 0.6);
      font-size: 20px;
    }
    
    @keyframes floatUp {
      0% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
      100% { transform: translateY(-100vh) rotate(360deg); opacity: 0; }
    }
    
    /* ===== CARD STYLES ===== */
    .card {
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 192, 203, 0.3);
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .card:hover {
      background: white;
      border-color: #ffb7c5;
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(255, 183, 197, 0.2);
    }
    
    .memory-card {
      cursor: pointer;
      min-height: 160px;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 1.5rem;
      transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .memory-card:active { transform: scale(0.98); }
    
    .hidden-memory { display: none; }
    
    @keyframes blink {
      from, to { border-color: transparent; }
      50% { border-color: #a45d5d; }
    }
    
    /* ===== POLAROID FLIP CARDS ===== */
    .flip-card {
      background: transparent;
      aspect-ratio: 1;
      perspective: 1000px;
      cursor: pointer;
    }
    .flip-inner {
      position: relative;
      width: 100%;
      height: 100%;
      text-align: center;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }
    .flip-card.flipped .flip-inner { transform: rotateY(180deg); }
    .flip-front, .flip-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 1rem;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.05);
    }
    .flip-front {
      background: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      border: 1px solid rgba(255, 192, 203, 0.3);
    }
    .flip-back {
      background: white;
      transform: rotateY(180deg);
    }
    .flip-back img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    /* ===== PASSWORD GATE ===== */
    .gate-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: linear-gradient(145deg, #ffd1d1 0%, #ffb7c5 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .gate-container.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }
    .gate-box {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(20px);
      padding: 3rem;
      border-radius: 2rem;
      box-shadow: 0 30px 60px rgba(255, 109, 133, 0.3);
      max-width: 450px;
      width: 90%;
      text-align: center;
    }
    
    /* ===== PHOTO GALLERY ===== */
    .gallery-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1.5rem;
    }
    .gallery-item {
      position: relative;
      aspect-ratio: 1;
      border-radius: 1rem;
      overflow: hidden;
      cursor: pointer;
    }
    .gallery-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    .gallery-item:hover img { transform: scale(1.1); }
    .gallery-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to top, rgba(255, 141, 161, 0.9), transparent);
      opacity: 0;
      transition: opacity 0.3s ease;
      display: flex;
      align-items: flex-end;
      padding: 1rem;
      color: white;
      font-weight: 500;
    }
    .gallery-item:hover .gallery-overlay { opacity: 1; }
    
    /* ===== LIGHTBOX ===== */
    .lightbox {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .lightbox.active {
      opacity: 1;
      visibility: visible;
    }
    .lightbox-content {
      max-width: 90%;
      max-height: 90vh;
      position: relative;
    }
    .lightbox-content img {
      max-width: 100%;
      max-height: 85vh;
      border-radius: 1rem;
    }
    .lightbox-close {
      position: absolute;
      top: -40px;
      right: 0;
      color: white;
      font-size: 2rem;
      cursor: pointer;
    }
    
    /* ===== YES/NO TOGGLE ===== */
    .valentine-toggle {
      background: linear-gradient(135deg, #ff8da1, #ffb7c5);
      padding: 3rem 2rem;
      border-radius: 2rem;
      color: white;
    }
    .no-btn {
      position: relative;
      transition: all 0.2s ease;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-20px); }
      75% { transform: translateX(20px); }
    }
    .shake { animation: shake 0.5s ease; }
    
    /* ===== COUNTDOWN ===== */
    .countdown-number {
      background: linear-gradient(135deg, #ff8da1, #ffb7c5);
      color: white;
      font-weight: 700;
      border-radius: 12px;
      padding: 8px 12px;
      min-width: 70px;
      text-align: center;
    }
    
    /* ===== MUSIC CONTROLS ===== */
    #music-control {
      transition: all 0.3s ease;
      z-index: 10002;
    }
    #music-toggle {
      background: white;
      border: 2px solid #ffb7c5;
      box-shadow: 0 4px 15px rgba(255, 141, 161, 0.3);
    }
    
    /* ===== DANCE OVERLAY ===== */
    .dance-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      z-index: 10001;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.5s ease;
    }
    .dance-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .dance-hearts {
      display: flex;
      gap: 40px;
      margin-bottom: 30px;
    }
    .dance-heart-left, .dance-heart-right {
      font-size: 80px;
      animation: sway 3s ease-in-out infinite;
    }
    .dance-heart-right { animation-delay: 0.5s; }
    @keyframes sway {
      0%, 100% { transform: translateY(0) rotate(-5deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    
    /* ===== NEW PHASE 1 STYLES ===== */
    .timeline-entry {
      transition: all 0.3s ease;
      border-left: 4px solid #ffb7c5;
    }
    .timeline-entry:hover {
      transform: translateX(8px);
      border-left-color: #ff8da1;
    }
    .letter-card {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }
    .letter-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(255, 141, 161, 0.2);
    }
    .bucket-item {
      transition: all 0.2s ease;
    }
    .bucket-item:hover {
      background: rgba(255, 255, 255, 0.5);
    }
    
    /* ===== MOBILE FIXES ===== */
    @media (max-width: 640px) {
      .memory-card { min-height: 120px !important; padding: 1rem !important; }
      #surprise-btn {
        position: sticky;
        bottom: 20px;
        width: calc(100% - 40px);
        margin: 0 auto;
        padding: 16px !important;
        font-size: 18px !important;
        z-index: 50;
      }
      .no-btn, .yes-btn { min-width: 120px; min-height: 56px; }
      #music-control { bottom: 100px; right: 16px; }
    }
  </style>
</head>
<body class="locked relative min-h-screen">

  <!-- ğŸšª PASSWORD GATE -->
  <div id="gate" class="gate-container">
    <div class="gate-box floating">
      <span class="text-7xl block mb-4 heartbeat" style="color: #ff8da1;">ğŸ«€</span>
      <h1 class="text-3xl md:text-4xl font-bold mb-4" style="color: #ff8da1;">
        for your eyes only
      </h1>
      <p class="text-gray-600 mb-6">enter the date we became us</p>
      <div class="space-y-4">
        <input 
          type="text" 
          id="password-input" 
          placeholder="DDMMYYYY" 
          class="w-full px-5 py-3 rounded-full border-2 border-pink-200 focus:border-pink-400 outline-none text-center text-lg"
          autofocus
        >
        <button 
          onclick="checkPassword()" 
          class="w-full px-6 py-3 bg-gradient-to-r from-pink-400 to-pink-500 text-white rounded-full font-semibold hover:shadow-xl transform hover:scale-105 transition-all duration-300"
        >
          unlock my heart ğŸ’
        </button>
        <p id="password-error" class="text-red-500 text-sm hidden">wrong date, try again darling ğŸ’”</p>
      </div>
      <p class="text-xs text-gray-400 mt-6">*hint: the day we became official</p>
    </div>
  </div>

  <!-- Floating Particles Container -->
  <div id="particles-container" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1;"></div>

  <!-- Dance Overlay -->
  <div id="dance-overlay" class="dance-overlay">
    <div class="dance-hearts">
      <div class="dance-heart-left">ğŸ«€</div>
      <div class="dance-heart-right">ğŸ«€</div>
    </div>
    <p class="text-white text-2xl md:text-3xl font-bold mb-4" style="font-family: 'Playfair Display', serif;">our first dance</p>
    <p class="text-pink-300 text-lg">you & me, always</p>
    <button onclick="closeDanceOverlay()" class="mt-8 px-6 py-3 bg-white/20 backdrop-blur text-white rounded-full hover:bg-white/30 transition">
      back to us ğŸ’•
    </button>
  </div>

  <!-- Main Content -->
  <div id="main-content" class="relative max-w-6xl mx-auto px-4 py-12 opacity-0 transition-opacity duration-1000" style="z-index: 10;">
    
    <!-- ===== HERO SECTION ===== -->
    <div class="relative min-h-screen flex items-center justify-center mb-20">
      <div class="absolute inset-0 bg-gradient-to-b from-pink-100/30 via-transparent to-pink-100/30 pointer-events-none"></div>
      <div class="relative z-10 text-center max-w-4xl mx-auto px-4">
        
        <!-- HER PHOTO -->
        <div class="relative inline-block mb-8 group">
          <div class="absolute -inset-2 md:-inset-3 bg-white rounded-2xl shadow-2xl rotate-[-2deg] group-hover:rotate-0 transition-transform duration-500"></div>
          <div class="absolute -inset-2 md:-inset-3 bg-white rounded-2xl shadow-2xl rotate-[3deg] group-hover:rotate-0 transition-transform duration-500 opacity-50"></div>
          
          <div class="relative w-64 h-64 md:w-80 md:h-80 rounded-2xl overflow-hidden shadow-2xl border-4 border-white mx-auto bg-pink-100">
            <img 
              src="assets/IMG-20250710-WA0039 (1).jpg"
              alt="her smile"
              class="absolute inset-0 w-full h-full object-cover object-center"
              id="hero-image"
              style="object-position: center 30%;"
              onerror="this.src='https://placehold.co/400x400/ffb7c5/ffffff?text=My+Mama'"
            >
            <div class="absolute inset-0 bg-gradient-to-t from-pink-500/20 via-transparent to-transparent"></div>
          </div>
          
          <div class="absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-white/90 backdrop-blur-sm px-4 md:px-6 py-2 rounded-full text-xs md:text-sm font-medium text-gray-700 shadow-lg whitespace-nowrap">
            âœ¦ the woman who stole my heart âœ¦
          </div>
        </div>
        
        <h1 class="text-5xl md:text-7xl font-bold mb-4 mt-12" style="color: #2d2d2d;">
          for my <span style="color: #ff8da1;" class="heartbeat">Mama</span>
        </h1>

        <!-- TYPING ANIMATION -->
        <div class="flex items-center justify-center gap-2 text-xl md:text-2xl text-gray-600 min-h-[60px] flex-wrap">
          <span>you are my</span>
          <span id="words" class="font-semibold text-pink-500 min-w-[120px] text-left"></span>
          <span id="cursor" class="w-[3px] h-[1.2em] bg-pink-400 animate-blink"></span>
        </div>
      </div>
    </div>

    <!-- ğŸ’˜ WILL YOU BE MY VALENTINE? -->
    <section class="mb-24">
      <div class="valentine-toggle rounded-3xl shadow-2xl text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-6 text-white drop-shadow-lg">
          will you be my forever? ğŸ’Œ
        </h2>
        <div class="flex items-center justify-center gap-6 flex-wrap">
          <button id="yes-btn" class="px-10 py-4 bg-white text-pink-500 rounded-full text-xl font-bold shadow-xl transform hover:scale-110 transition-all duration-300 hover:shadow-2xl">
            YES ğŸ’–
          </button>
          <button id="no-btn" class="no-btn px-10 py-4 bg-gray-200 text-gray-700 rounded-full text-xl font-bold shadow-xl transition-all duration-200">
            NO ğŸ˜¤
          </button>
        </div>
        <div id="valentine-response" class="mt-6 text-2xl font-bold text-white hidden">
          ğŸ‰ YAY! you just made me the happiest person ever! ğŸ‰
        </div>
      </div>
    </section>

    <!-- ===== INTERACTIVE MAP + COUNTDOWN ===== -->
    <section class="mb-24">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-8" style="color: #2d2d2d;">
        distance means nothing <span class="heart heartbeat">ğŸ«€</span>
      </h2>
      
      <div class="grid md:grid-cols-2 gap-6 max-w-5xl mx-auto">
        <!-- LEFT: INTERACTIVE MAP -->
        <div class="bg-white/80 backdrop-blur rounded-3xl p-4 shadow-xl border border-pink-200">
          <div id="love-map" style="height: 300px; width: 100%;"></div>
          <p class="text-center text-xs text-gray-400 mt-3">
            <span class="text-pink-500">â¤ï¸</span> Kadongo â†’ Mombasa Â· 776 km <span class="text-pink-500">â¤ï¸</span>
          </p>
        </div>
        
        <!-- RIGHT: LIVE COUNTDOWN -->
        <div class="bg-gradient-to-br from-pink-50 to-white rounded-3xl p-6 shadow-xl border border-pink-200 flex flex-col justify-center">
          <div class="text-center">
            <span class="text-4xl mb-3 block heartbeat">â³</span>
            <h3 class="text-xl font-bold mb-2" style="color: #ff8da1;">counting down to</h3>
            <p class="text-lg font-semibold text-gray-700 mb-6">the next time i hold you</p>
            
            <div class="flex justify-center gap-2 md:gap-3 mb-4 flex-wrap">
              <div class="countdown-number"><div id="days" class="text-2xl md:text-3xl font-bold">--</div><div class="text-xs opacity-90 mt-1">days</div></div>
              <div class="countdown-number"><div id="hours" class="text-2xl md:text-3xl font-bold">--</div><div class="text-xs opacity-90 mt-1">hrs</div></div>
              <div class="countdown-number"><div id="minutes" class="text-2xl md:text-3xl font-bold">--</div><div class="text-xs opacity-90 mt-1">mins</div></div>
              <div class="countdown-number"><div id="seconds" class="text-2xl md:text-3xl font-bold">--</div><div class="text-xs opacity-90 mt-1">secs</div></div>
            </div>
            
            <p id="countdown-message" class="text-sm italic text-gray-500 mt-4">
              every second brings me closer to you
            </p>
          </div>
        </div>
      </div>
      
      <div class="text-center mt-8">
        <p class="text-sm italic text-gray-600 bg-white/50 inline-block px-6 py-3 rounded-full shadow-sm">
          "776 km apart, but you're always right here" <span class="text-pink-500 heartbeat">ğŸ«€</span>
        </p>
      </div>
    </section>

    <!-- Our Timeline (Original preserved) -->
    <section class="mb-24">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-12" style="color: #2d2d2d;">
        our little story <span class="heart">â¤ï¸</span>
      </h2>
      <div class="grid md:grid-cols-3 gap-6">
        <div class="card p-6 rounded-2xl">
          <span class="text-4xl mb-3 block heartbeat">ğŸ‘‹</span>
          <h3 class="text-xl font-bold mb-2">the meet</h3>
          <p class="text-gray-600">
            It was just a normal day. Nothing special about the air. Nothing unusual about the moment. But then you appeared. And somehow, everything shifted quietly. I didn't know I was meeting someone who would become my safe place, my favorite voice, my calm in chaos. But I did.
          </p>
          <p class="text-xs text-gray-400 mt-2">[09/07/2025]</p>
        </div>
        <div class="card p-6 rounded-2xl">
          <span class="text-4xl mb-3 block heartbeat">âœ¨</span>
          <h3 class="text-xl font-bold mb-2">the moment</h3>
          <p class="text-gray-600">I knew I loved you the night you fell asleep on my shoulder and I didn't move for two hours. Then was awaken by your beautiful kisses at 2 am. Not because I was trapped. Because some moments are worth going numb for and dying for.</p>
          <p class="text-xs text-gray-400 mt-2">[09/07/2025]</p>
        </div>
        <div class="card p-6 rounded-2xl">
          <span class="text-4xl mb-3 block heartbeat">ğŸŒŸ</span>
          <h3 class="text-xl font-bold mb-2">right now</h3>
          <p class="text-gray-600">still falling, every single day</p>
          <p class="text-xs text-gray-400 mt-2">[14/02/2026]</p>
        </div>
      </div>
    </section>

    <!-- ===== 12 REASONS ===== -->
    <section class="mb-24">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-4" style="color: #2d2d2d;">
        12 reasons i <span class="heart heartbeat">â¤ï¸</span> you
      </h2>
      
      <div class="text-center mb-6">
        <p class="text-pink-400 text-sm uppercase tracking-wider">âœ¨ hearts collected âœ¨</p>
        <div id="unlock-progress" class="flex justify-center gap-1 my-2"></div>
        <p id="unlock-hint" class="text-xs text-gray-400">tap hearts throughout the site to unlock more reasons</p>
      </div>
      
      <p class="text-center text-gray-500 mb-10">tap each card to reveal</p>
      
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="reasons-grid"></div>
    </section>

    <!-- ===== INTERACTIVE POLAROID WALL ===== -->
    <section class="mb-24">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-4" style="color: #2d2d2d;">
        our photo diary <span class="heart heartbeat">ğŸ“¸</span>
      </h2>
      <p class="text-center text-gray-500 mb-10">tap each polaroid to flip â†’ see the memory</p>
      
      <div id="polaroid-flip-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
      
      <!-- Lightbox -->
      <div id="lightbox" class="lightbox">
        <div class="lightbox-content">
          <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
          <img id="lightbox-img" src="" alt="">
        </div>
      </div>
    </section>

    <!-- ===== TIMELINE 2.0 â€” Expanded History (NEW) ===== -->
    <section class="mb-24" data-aos="fade-up">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-4" style="color: #2d2d2d;">
        our story <span class="heart heartbeat">ğŸ“–</span>
      </h2>
      <p class="text-center text-gray-500 mb-8">every chapter, one scroll at a time</p>
      
      <div class="max-w-3xl mx-auto relative">
        <!-- Timeline line (decorative) -->
        <div class="absolute left-4 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-pink-300 to-pink-200 transform md:translate-x-[-0.5px]"></div>
        
        <div id="timeline-container" class="space-y-8">
          <!-- Timeline entries will be loaded here -->
        </div>
        
        <!-- Add new entry form -->
        <div class="mt-12 bg-white/80 backdrop-blur rounded-3xl p-6 shadow-xl border border-pink-200">
          <h3 class="text-xl font-bold mb-4 text-center" style="color: #ff8da1;">add a new memory</h3>
          <div class="grid md:grid-cols-2 gap-4">
            <input type="text" id="timeline-title" placeholder="title (e.g., our first trip)" class="px-4 py-3 rounded-full border-2 border-pink-200 focus:border-pink-400 outline-none">
            <input type="text" id="timeline-date" placeholder="date (e.g., March 2026)" class="px-4 py-3 rounded-full border-2 border-pink-200 focus:border-pink-400 outline-none">
          </div>
          <textarea id="timeline-description" rows="2" placeholder="what happened? how did it feel?" class="w-full mt-4 px-4 py-3 rounded-2xl border-2 border-pink-200 focus:border-pink-400 outline-none"></textarea>
          <div class="flex justify-end mt-4">
            <button id="add-timeline" class="px-6 py-3 bg-gradient-to-r from-pink-400 to-pink-500 text-white rounded-full font-semibold shadow-md hover:shadow-xl transform hover:scale-105 transition-all duration-300">
              add to our story âœ¨
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== MONTHLY LETTERS ARCHIVE (NEW) ===== -->
    <section class="mb-24" data-aos="fade-up">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-4" style="color: #2d2d2d;">
        letters to you <span class="heart heartbeat">ğŸ’Œ</span>
      </h2>
      <p class="text-center text-gray-500 mb-8">every month, another piece of my heart</p>
      
      <div class="max-w-4xl mx-auto">
        <!-- Current month's letter -->
        <div class="mb-12">
          <div class="bg-white/90 backdrop-blur rounded-3xl p-8 shadow-2xl border-2 border-pink-200 relative overflow-hidden letter-card">
            <div class="absolute -top-6 -right-6 text-8xl opacity-10 rotate-12">ğŸ’Œ</div>
            <div class="flex items-center gap-3 mb-4">
              <span class="text-4xl heartbeat">ğŸ“¬</span>
              <div>
                <h3 class="text-2xl font-bold" style="color: #ff8da1;" id="current-month">February 2026</h3>
                <p class="text-sm text-gray-400">this month's letter</p>
              </div>
            </div>
            <div id="current-letter" class="text-gray-700 leading-relaxed" style="font-family: 'Playfair Display', serif;">
              <!-- Current letter loads here -->
            </div>
            <div class="mt-4 text-right">
              <span class="text-sm text-pink-400">â€” Muffin</span>
            </div>
          </div>
        </div>
        
        <!-- Archive grid -->
        <h3 class="text-xl font-bold text-center mb-4">past letters</h3>
        <div id="letters-archive" class="grid grid-cols-2 md:grid-cols-4 gap-4">
          <!-- Archive cards load here -->
        </div>
        
        <!-- Add new letter form -->
        <div class="mt-12 bg-white/80 backdrop-blur rounded-3xl p-6 shadow-xl border border-pink-200" id="add-letter-form">
          <h3 class="text-xl font-bold mb-4 text-center" style="color: #ff8da1;">write this month's letter</h3>
          <textarea id="new-letter" rows="4" class="w-full px-4 py-3 rounded-2xl border-2 border-pink-200 focus:border-pink-400 outline-none" placeholder="my darling..."></textarea>
          <div class="flex justify-end mt-4">
            <button id="save-letter" class="px-6 py-3 bg-gradient-to-r from-pink-400 to-pink-500 text-white rounded-full font-semibold shadow-md hover:shadow-xl transform hover:scale-105 transition-all duration-300">
              publish letter ğŸ’Œ
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== COUPLE'S BUCKET LIST (NEW) ===== -->
    <section class="mb-24" data-aos="fade-up">
      <h2 class="text-3xl md:text-4xl font-bold text-center mb-4" style="color: #2d2d2d;">
        our bucket list <span class="heart heartbeat">ğŸŒŸ</span>
      </h2>
      <p class="text-center text-gray-500 mb-8">dreams we're building together</p>
      
      <div class="max-w-2xl mx-auto bg-white/80 backdrop-blur rounded-3xl p-6 shadow-xl border border-pink-200">
        <!-- Add new goal -->
        <div class="flex gap-3 mb-8">
          <input type="text" id="new-goal" placeholder="e.g., watch sunset in Zanzibar..." class="flex-1 px-4 py-3 rounded-full border-2 border-pink-200 focus:border-pink-400 outline-none">
          <button id="add-goal" class="px-6 py-3 bg-gradient-to-r from-pink-400 to-pink-500 text-white rounded-full font-semibold shadow-md hover:shadow-xl transform hover:scale-105 transition-all duration-300">
            add dream
          </button>
        </div>
        
        <!-- Goals list -->
        <div id="goals-list" class="space-y-3 max-h-96 overflow-y-auto pr-2"></div>
        
        <p class="text-xs text-gray-400 mt-4 text-center">âœ… check them off as we go â€” we're building forever</p>
      </div>
    </section>

    <!-- ğŸ’Œ THE LOVE LETTER (Original preserved) -->
    <section class="mb-24 relative">
      <div class="absolute inset-0 opacity-5 pointer-events-none" 
           style="background-image: repeating-linear-gradient(45deg, #8b5a2b 0px, #8b5a2b 2px, transparent 2px, transparent 8px);"></div>
      
      <div class="relative max-w-3xl mx-auto">
        <div class="absolute -top-6 -left-6 text-6xl transform -rotate-12 opacity-80 heartbeat">ğŸ’Œ</div>
        <div class="absolute -bottom-6 -right-6 text-6xl transform rotate-12 opacity-80 heartbeat">ğŸ’</div>
        
        <div class="card bg-white/95 backdrop-blur-sm p-8 md:p-14 rounded-3xl shadow-2xl border border-pink-200/50 relative overflow-hidden">
          <div class="absolute -bottom-10 -right-10 text-9xl opacity-5 rotate-12">â¤ï¸</div>
          
          <div style="font-family: 'Playfair Display', serif;" class="relative z-10">
            <p class="text-right text-sm text-gray-400 mb-8 italic tracking-wide">
              our first letter Â· February 2026
            </p>
            
            <div class="space-y-6 text-gray-700 leading-relaxed" id="original-letter">
              <p class="text-xl" style="color: #4a4a4a;">My darling,</p>
              <p class="pl-4 border-l-4 border-pink-300 italic text-lg" style="color: #5a5a5a;">
                Before you, my world was in grayscale â€”<br>
                a collection of days strung together like old photographs.<br>
                Then you arrived, not like a storm,<br>
                but like dawn: patient, golden, inevitable.
              </p>
              <p>
                You are the kind of quiet that fills rooms.<br>
                <span class="text-pink-500 font-semibold heartbeat">Your laugh</span> spills like light through windowpanes,<br>
                and your heart â€” god, your heart â€”<br>
                is not content to simply beat;<br>
                it <span class="italic">radiates</span>. It finds stray souls and calls them home.
              </p>
              <p class="text-sm md:text-base">
                I love you in the small infinities:<br>
                <span class="ml-2">â€¢ the way you tilt your head when you're solving a problem</span><br>
                <span class="ml-2">â€¢ your post-nap voice, still dreaming at the edges</span><br>
                <span class="ml-2">â€¢ how you remember the names of baristas, cashiers, strangers</span><br>
                <span class="ml-2">â€¢ the sound you make when something is *really* good</span><br>
                <span class="ml-2">â€¢ your hands finding mine in the dark</span>
              </p>
              <p class="relative">
                <span class="text-3xl float-left mr-2 text-pink-400" style="font-size: 4rem; line-height: 0.8;">"</span>
                You are not my other half â€”<br>
                that implies we were broken once, incomplete.<br>
                You are my <span class="font-bold text-pink-500">more</span>. My expansion.<br>
                The reason my chest has learned a new rhythm.<br>
                Before you, I loved in lowercase.<br>
                Now every feeling arrives with capital letters.
              </p>
              <p class="text-center my-8 py-4 px-6 bg-pink-50/80 rounded-xl italic text-lg">
                "What did I do to deserve you?"<br>
                <span class="text-gray-500 text-sm">â€” you ask me this, still not understanding</span><br>
                <span class="font-semibold text-pink-500">that the question isn't what I did,</span><br>
                <span class="font-semibold text-pink-500">but what the universe was thinking,</span><br>
                <span class="font-semibold text-pink-500">waiting so long to give you to me.</span>
              </p>
              <p>
                I promise you:<br>
                <span class="ml-2">â€¢ not a perfect love, but a present one</span><br>
                <span class="ml-2">â€¢ not a fairy tale, but a story we write together</span><br>
                <span class="ml-2">â€¢ not possession, but witness â€” I will spend my life</span><br>
                <span class="ml-6">watching you become more of who you already are</span>
              </p>
              <p class="text-center text-pink-400 text-2xl my-6">âˆ¼  â˜•  âˆ¼  ğŸŒ™  âˆ¼  âœ¨  âˆ¼</p>
              <p>
                So here is my hand, if you'll still have it.<br>
                Here is my life, unscripted and uncertain.<br>
                Here is my heart â€” already yours,<br>
                just waiting for you to open it.
              </p>
              <div class="mt-12 text-right">
                <p class="text-2xl mb-1" style="font-family: 'Playfair Display', serif; color: #ff8da1;">Yours, always,</p>
                <p class="text-4xl mt-2" style="font-family: 'Playfair Display', serif; font-weight: 700; color: #ff6b8b;">Muffin</p>
                <p class="text-xs text-gray-400 mt-3 tracking-widest uppercase">âœ¦ for as long as you'll let me âœ¦</p>
              </div>
            </div>
          </div>
          
          <!-- Wax seal -->
          <div class="absolute top-4 right-4 group cursor-pointer" id="wax-seal">
            <div class="relative">
              <div class="w-16 h-16 bg-gradient-to-br from-red-400 to-red-600 rounded-full shadow-xl flex items-center justify-center text-white text-2xl transform group-hover:scale-110 group-hover:rotate-12 transition-all duration-300 heartbeat">
                ğŸ’®
              </div>
              <div class="absolute -bottom-1 -right-1 text-xs bg-white px-2 py-1 rounded-full shadow-md opacity-0 group-hover:opacity-100 transition-opacity">
                break the seal
              </div>
            </div>
          </div>
        </div>
        
        <p class="text-center text-xs text-gray-400 mt-6 tracking-wide">
          âœ handwritten in pixels, but meant with everything i have
        </p>
      </div>
    </section>

    <!-- ğŸµ SPOTIFY PLAYLIST -->
    <section class="mb-24">
      <div class="max-w-2xl mx-auto">
        <h2 class="text-2xl md:text-3xl font-bold text-center mb-6" style="color: #2d2d2d;">
          our soundtrack ğŸ§
        </h2>
        <div class="music-player">
          <iframe style="border-radius:12px" src="https://open.spotify.com/embed/playlist/0irhYypkLi84M4sb9qHinP?utm_source=generator" width="100%" height="152" frameBorder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
        </div>
        <p class="text-center text-gray-400 text-sm mt-3">songs that remind me of you</p>
        
        <div class="text-center mt-4">
          <button id="voice-note-btn" class="text-sm text-pink-400 hover:text-pink-600 transition-colors underline decoration-dotted">
            ğŸ™ï¸ hear what she said when I asked her out
          </button>
          <audio id="her-voice" style="display: none;">
            <source src="assets/her-voice.m4a" type="audio/mp4">
          </audio>
        </div>
      </div>
    </section>

    <!-- ğŸ‘¶ SECRET FUTURE KIDS SECTION -->
    <section id="future-kids-section" class="mb-24 relative opacity-0 transform translate-y-10 transition-all duration-1000">
      <div class="absolute -top-12 right-0 text-4xl cursor-pointer hover:scale-110 transition-transform" id="baby-rattle" title="shake shake shake">
        ğŸ¼
      </div>
      
      <div class="bg-gradient-to-br from-blue-50 to-pink-50 rounded-3xl p-8 md:p-12 border-2 border-dashed border-pink-300 relative overflow-hidden">
        <div class="relative z-10">
          <div class="flex items-center justify-between mb-6">
            <div>
              <span class="text-4xl block mb-2 heartbeat">ğŸ‘¶ğŸ’­</span>
              <h2 class="text-3xl md:text-4xl font-bold" style="color: #2d2d2d;">our future <span style="color: #ff8da1;">little ones</span></h2>
              <p class="text-gray-500 mt-2">secret section â€” shh, don't tell future them ğŸ¤«</p>
            </div>
            <div id="kids-lock" class="text-3xl bg-white/80 backdrop-blur p-4 rounded-full shadow-lg cursor-pointer hover:scale-110 transition-transform">ğŸ”’</div>
          </div>
          
          <div id="kids-locked-content" class="text-center py-12">
            <span class="text-6xl mb-4 block opacity-50">ğŸ‘¶ğŸ”’</span>
            <p class="text-gray-400 text-lg mb-4">this section is locked for now...</p>
            <button id="unlock-kids-btn" class="px-6 py-3 bg-gradient-to-r from-blue-400 to-pink-400 text-white rounded-full font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
              tap to unlock ğŸ‘†
            </button>
            <p class="text-xs text-gray-400 mt-4">*hint: try 3 times, it's our inside number</p>
          </div>
          
          <div id="kids-unlocked-content" class="hidden">
            <div class="mb-10 text-center">
              <p class="text-sm uppercase tracking-wider text-gray-400 mb-3">how many mini us?</p>
              <div class="flex items-center justify-center gap-4">
                <button id="decrease-kids" class="w-12 h-12 rounded-full bg-white shadow-md text-2xl hover:bg-pink-100 transition-colors">-</button>
                <span id="kid-count" class="text-5xl font-bold w-20 text-center" style="color: #ff8da1;">2</span>
                <button id="increase-kids" class="w-12 h-12 rounded-full bg-white shadow-md text-2xl hover:bg-pink-100 transition-colors">+</button>
              </div>
            </div>
            
            <div id="kids-names-container" class="grid md:grid-cols-2 gap-6 mb-8"></div>
            
            <div class="flex items-center justify-center gap-6 mb-8">
              <span class="text-gray-600">ğŸ‘¦ more boys</span>
              <label class="relative inline-flex items-center cursor-pointer">
                <input type="checkbox" id="gender-toggle" class="sr-only peer">
                <div class="w-14 h-7 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-gradient-to-r peer-checked:from-pink-400 peer-checked:to-blue-400"></div>
              </label>
              <span class="text-gray-600">ğŸ‘§ more girls</span>
            </div>
            
            <div class="bg-white/80 backdrop-blur rounded-2xl p-6 mt-6">
              <div class="flex items-center gap-3 mb-4">
                <span class="text-2xl heartbeat">ğŸ’Œ</span>
                <h3 class="text-xl font-semibold" style="color: #2d2d2d;">a letter to our future babies</h3>
              </div>
              <p class="text-gray-600 italic mb-4" id="future-kids-letter">
                dear little ones, your mom is the reason i believe in magic. i hope you have her laugh, her heart, and her ability to make a home out of anywhere. can't wait to meet you someday. ğŸŒ™
              </p>
              <div class="flex justify-end">
                <button id="randomize-letter" class="text-sm text-pink-400 hover:text-pink-600 transition-colors">
                  shuffle sentiment ğŸ”„
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Surprise Button -->
    <div class="text-center mb-20">
      <button id="surprise-btn" class="group relative px-10 py-5 bg-gradient-to-r from-pink-400 to-pink-500 text-white rounded-full text-xl font-semibold shadow-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-300">
        <span class="relative z-10">tap for a surprise ğŸ</span>
        <span class="absolute inset-0 bg-white rounded-full opacity-0 group-hover:opacity-20 transition-opacity"></span>
      </button>
    </div>

  </div>

  <!-- Background Music -->
  <audio id="bg-music" loop preload="auto" muted>
    <source src="assets/valentine-bgm.mp3" type="audio/mpeg">
  </audio>
  
  <!-- Floating Music Control -->
  <div id="music-control" class="fixed bottom-28 right-6 z-50 flex flex-col items-end gap-2">
    <button id="music-toggle" class="bg-white/90 backdrop-blur p-4 rounded-full shadow-xl border-2 border-pink-300 hover:scale-110 transition-all duration-300 heartbeat group">
      <span id="music-icon" class="text-2xl">ğŸ”‡</span>
    </button>
    <span id="music-label" class="bg-white/90 backdrop-blur px-3 py-1 rounded-full text-xs text-pink-500 font-medium shadow-md opacity-0 group-hover:opacity-100 transition-opacity">
      play our song
    </span>
  </div>

  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  
  <script>
    // ============================================
    // ğŸ” PASSWORD PROTECTION
    // ============================================
    const CORRECT_PASSWORD = "24052025";
    const HER_NAME = "Mama";
    const YOUR_NAME = "Senna";
    
    function checkPassword() {
      const input = document.getElementById('password-input').value;
      const error = document.getElementById('password-error');
      
      if (input === CORRECT_PASSWORD) {
        document.getElementById('gate').classList.add('hidden');
        document.body.classList.remove('locked');
        document.body.classList.add('unlocked');
        document.getElementById('main-content').style.opacity = '1';
        
        AOS.init({ once: true, duration: 800, offset: 100 });
        
        startFloatingHearts();
        heartConfetti(100);
        createConfetti(100);
        startTyping();
        setTimeout(tryLoadRealImage, 500);
        setTimeout(initLoveMap, 600);
        initCountdown();
        
        // Load new features
        loadTimeline();
        loadLetters();
        loadGoals();
        
        // Try to play music
        setTimeout(attemptAutoPlay, 1500);
        
      } else {
        error.classList.remove('hidden');
        document.getElementById('password-input').classList.add('shake');
        setTimeout(() => {
          document.getElementById('password-input').classList.remove('shake');
        }, 500);
      }
    }

    // ============================================
    // ğŸ’“ FLOATING HEART PARTICLES
    // ============================================
    function createFloatingHeart() {
      const heart = document.createElement('div');
      heart.className = 'floating-heart';
      heart.innerHTML = ['â¤ï¸', 'ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’“', 'ğŸ«€'][Math.floor(Math.random() * 6)];
      heart.style.left = Math.random() * 100 + 'vw';
      heart.style.fontSize = (Math.random() * 20 + 15) + 'px';
      heart.style.animationDuration = (Math.random() * 6 + 5) + 's';
      heart.style.opacity = Math.random() * 0.4 + 0.2;
      document.getElementById('particles-container').appendChild(heart);
      setTimeout(() => heart.remove(), 10000);
    }
    
    let heartsInterval;
    function startFloatingHearts() {
      if (heartsInterval) clearInterval(heartsInterval);
      createFloatingHeart();
      heartsInterval = setInterval(createFloatingHeart, 800);
    }

    // ============================================
    // ğŸŠ HEART CONFETTI
    // ============================================
    function heartConfetti(count = 50) {
      if (typeof confetti !== 'function') return;
      for (let i = 0; i < count; i++) {
        setTimeout(() => {
          confetti({
            particleCount: 3,
            spread: 70,
            origin: { x: Math.random(), y: Math.random() * 0.6 },
            colors: ['#ff8da1', '#ffb7c5', '#ff6b8b', '#ff4d6d'],
            shapes: ['heart', 'circle'],
            scalar: 1.2
          });
        }, i * 20);
      }
    }

    // ============================================
    // ğŸµ BACKGROUND MUSIC
    // ============================================
    const audio = document.getElementById('bg-music');
    const toggleBtn = document.getElementById('music-toggle');
    const musicIcon = document.getElementById('music-icon');
    const musicLabel = document.getElementById('music-label');

    function attemptAutoPlay() {
      audio.muted = false;
      audio.play()
        .then(() => {
          musicIcon.textContent = 'ğŸµ';
          musicLabel.textContent = 'our song';
          heartConfetti(15);
        })
        .catch(e => {
          musicIcon.textContent = 'ğŸ”‡';
          musicLabel.textContent = 'tap to play';
        });
    }

    toggleBtn.addEventListener('click', function() {
      if (audio.paused) {
        audio.muted = false;
        audio.play()
          .then(() => {
            musicIcon.textContent = 'ğŸµ';
            musicLabel.textContent = 'our song';
            heartConfetti(10);
          })
          .catch(e => console.log('Play failed:', e));
      } else {
        audio.pause();
        musicIcon.textContent = 'ğŸ”‡';
        musicLabel.textContent = 'play our song';
      }
    });

    // ============================================
    // ğŸ–¼ï¸ TRY TO LOAD REAL IMAGE
    // ============================================
    function tryLoadRealImage() {
      const heroImg = document.getElementById('hero-image');
      if (heroImg) {
        heroImg.src = 'assets/IMG-20250710-WA0039 (1).jpg';
      }
    }

    // ============================================
    // âŒ¨ï¸ TYPING ANIMATION
    // ============================================
    function startTyping() {
      const words = ["sunshine â˜€ï¸", "safe space ğŸ ", "best friend ğŸ«‚", "favorite person ğŸ’•", "home ğŸ¡", "everything âœ¨", "reason ğŸŒ™"];
      let i = 0, j = 0, isDeleting = false, isEnd = false;
      const wordsElement = document.getElementById('words');
      
      function type() {
        if (!wordsElement) return;
        isEnd = false;
        const currentWord = words[i];
        
        if (isDeleting) {
          wordsElement.textContent = currentWord.substring(0, j - 1);
          j--;
          if (j === 0) { isDeleting = false; i = (i + 1) % words.length; }
        } else {
          wordsElement.textContent = currentWord.substring(0, j + 1);
          j++;
          if (j === currentWord.length) { isEnd = true; isDeleting = true; }
        }
        
        const speed = isDeleting ? 50 : 100;
        setTimeout(type, isEnd ? 2000 : speed);
      }
      setTimeout(type, 1000);
    }

    // ============================================
    // ğŸ—ºï¸ INTERACTIVE MAP
    // ============================================
    function initLoveMap() {
      if (!document.getElementById('love-map') || typeof L === 'undefined') return;
      
      const container = document.getElementById('love-map');
      container.innerHTML = '';
      
      try {
        const kadongo = [0.1167, 34.6167];
        const mombasa = [-4.0435, 39.6682];
        const map = L.map('love-map').setView([-1.9634, 37.14245], 7);
        
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
          attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',
          subdomains: 'abcd',
          maxZoom: 19
        }).addTo(map);
        
        const heartIcon = L.divIcon({ html: 'ğŸ“', className: 'text-2xl', iconSize: [30, 30] });
        const homeIcon = L.divIcon({ html: 'ğŸ ', className: 'text-2xl', iconSize: [30, 30] });
        
        L.marker(kadongo, { icon: heartIcon }).addTo(map).bindPopup('â¤ï¸ <strong>Mama</strong><br>Kadongo, Kenya');
        L.marker(mombasa, { icon: homeIcon }).addTo(map).bindPopup('ğŸ’™ <strong>Muffin</strong><br>Mombasa, Kenya');
        
        const polyline = L.polyline([kadongo, mombasa], {
          color: '#ff8da1',
          weight: 4,
          opacity: 0.8,
          dashArray: '10, 10',
          lineCap: 'round'
        }).addTo(map);
        
        let counter = 0;
        setInterval(() => {
          counter = (counter + 0.01) % 1;
          const lat = kadongo[0] + (mombasa[0] - kadongo[0]) * counter;
          const lng = kadongo[1] + (mombasa[1] - kadongo[1]) * counter;
          
          if (window.heartMarker) map.removeLayer(window.heartMarker);
          
          window.heartMarker = L.marker([lat, lng], {
            icon: L.divIcon({ html: 'ğŸ«€', className: 'text-2xl animate-pulse', iconSize: [25, 25] })
          }).addTo(map);
          
          if (Math.random() < 0.3) heartConfetti(10);
        }, 200);
        
        L.marker([-1.9634, 37.14245], {
          icon: L.divIcon({
            html: '<div class="bg-white/90 backdrop-blur px-3 py-1 rounded-full shadow-lg text-pink-500 font-bold text-xs heartbeat">776 km â¤ï¸</div>',
            className: 'distance-label',
            iconSize: [100, 30],
            iconAnchor: [50, 15]
          })
        }).addTo(map);
        
      } catch (e) {
        console.log("Map error:", e);
      }
    }

    // ============================================
    // ğŸ’ƒ DANCE OVERLAY
    // ============================================
    function showDanceOverlay() {
      const overlay = document.getElementById('dance-overlay');
      overlay.classList.add('active');
      heartConfetti(50);
      
      if (audio.paused) {
        audio.muted = false;
        audio.play()
          .then(() => {
            musicIcon.textContent = 'ğŸµ';
            musicLabel.textContent = 'our song';
          })
          .catch(e => {});
      }
      
      setTimeout(closeDanceOverlay, 8000);
    }
    
    function closeDanceOverlay() {
      document.getElementById('dance-overlay').classList.remove('active');
    }

    // ============================================
    // ğŸ® PROGRESSIVE UNLOCK SYSTEM
    // ============================================
    let unlockedCount = 3;
    const TOTAL_REASONS = 12;
    
    function unlockReason() {
      if (unlockedCount < TOTAL_REASONS) {
        unlockedCount++;
        updateProgressMeter();
        createConfetti(8);
        heartConfetti(5);
        
        if (unlockedCount === 6 || unlockedCount === 12) {
          heartConfetti(50);
        }
      }
    }
    
    function updateProgressMeter() {
      const progressDiv = document.getElementById('unlock-progress');
      if (!progressDiv) return;
      
      let html = '';
      for (let i = 0; i < TOTAL_REASONS; i++) {
        html += i < unlockedCount 
          ? '<span class="w-3 h-3 bg-pink-400 rounded-full mx-0.5 unlock-progress-dot heartbeat"></span>'
          : '<span class="w-3 h-3 bg-gray-200 rounded-full mx-0.5 unlock-progress-dot"></span>';
      }
      progressDiv.innerHTML = html;
      
      const hintEl = document.getElementById('unlock-hint');
      if (hintEl) {
        hintEl.innerHTML = unlockedCount < TOTAL_REASONS 
          ? `âœ¨ ${unlockedCount}/12 reasons unlocked â€” keep tapping hearts! âœ¨`
          : `ğŸ‰ ALL 12 REASONS UNLOCKED! You've collected all my heart ğŸ‰`;
      }
      
      const cards = document.querySelectorAll('#reasons-grid .memory-card');
      cards.forEach((card, index) => {
        if (index < unlockedCount) {
          card.style.opacity = '1';
          card.style.filter = 'none';
          card.classList.remove('reason-locked');
        } else {
          card.style.opacity = '0.5';
          card.style.filter = 'grayscale(0.5)';
          card.classList.add('reason-locked');
          const front = card.querySelector('.front');
          const back = card.querySelector('.back');
          if (back && !back.classList.contains('hidden-memory')) {
            if (front) front.classList.remove('hidden');
            back.classList.add('hidden-memory');
          }
        }
      });
    }

    // ============================================
    // ğŸ“¸ POLAROID FLIP CARDS
    // ============================================
    const polaroidMemories = [
      { emoji: "ğŸ¥°", title: "first date", date: "July 2025", image: "assets/IMG_20250710_145734.jpg", caption: "Butterflies from day one ğŸ¦‹" },
      { emoji: "ğŸ‚", title: "her birthday", date: "17 May 2002", image: "https://placehold.co/400x400/ff8da1/ffffff?text=Happy+Birthday", caption: "The day the world got you âœ¨" },
      { emoji: "ğŸŒŠ", title: "beach day", date: "Soon ğŸ¤", image: "https://placehold.co/400x400/ffb7c5/ffffff?text=Our+first+beach", caption: "Can't wait to see you in the sun â˜€ï¸" },
      { emoji: "â˜•", title: "3 months", date: "August 2025", image: "assets/IMG_20250824_180300.jpg", caption: "Three months, infinite moments" },
      { emoji: "ğŸ¤", title: "just us", date: "August 2025", image: "assets/IMG_20250824_183141.jpg", caption: "You. Me. Always." },
      { emoji: "âœ¨", title: "our story", date: "continues...", image: "https://placehold.co/400x400/ff8da1/ffffff?text=To+be+continued", caption: "The best is yet to come ğŸ’«" }
    ];

    function initPolaroidFlipCards() {
      const grid = document.getElementById('polaroid-flip-grid');
      if (!grid) return;
      grid.innerHTML = '';
      
      polaroidMemories.forEach((memory, index) => {
        const card = document.createElement('div');
        card.className = 'flip-card';
        card.setAttribute('data-aos', 'fade-up');
        card.setAttribute('data-aos-delay', index * 50);
        
        card.innerHTML = `
          <div class="flip-inner">
            <div class="flip-front">
              <span class="text-6xl mb-3 heartbeat">${memory.emoji}</span>
              <p class="text-gray-700 font-bold text-lg">${memory.title}</p>
              <p class="text-xs text-gray-400 mt-1">${memory.date}</p>
            </div>
            <div class="flip-back">
              <img src="${memory.image}" alt="${memory.title}" onerror="this.src='https://placehold.co/400x400/ffb7c5/ffffff?text=memory'">
              <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3">
                <p class="text-white text-sm font-medium">${memory.caption}</p>
              </div>
            </div>
          </div>
        `;
        
        card.addEventListener('click', function() {
          this.classList.toggle('flipped');
          heartConfetti(5);
          unlockReason();
        });
        
        grid.appendChild(card);
      });
    }

    // ============================================
    // ğŸ’ 12 REASONS
    // ============================================
    const reasons = [
      "Your laugh could cure my worst day ğŸµ",
      "Because in a loud world, you are my quiet place. When everything feels heavy, your presence feels like exhale. ğŸŸ",
      "Because you listen to the parts of me I don't show everyone. You don't just hear my words â€” you understand my silences.ğŸ±",
      "Because you see who I'm becoming â€” and you're not afraid of that future. ğŸ¤",
      "Your 3am deep thoughts ğŸŒ™",
      "You remember the small things ğŸ“",
      "You're pretty and You don't even know it âœ¨",
      "Because you choose me. Not halfway. Not temporarily. Fully. ğŸ¦‹",
      "Because you make strength feel soft. With you, I don't have to armor up. I can just be. ğŸ˜´",
      "you make ordinary days feel like adventures ğŸ—ºï¸",
      "Because you speak life over me. Your prayers, your wishes, your hope for me â€” I feel them.ğŸŒ¿",
      "You. just You. all of You. And I don't just love you for who you are todayâ€¦ I love you for every version of us we haven't met yet.â€ ğŸ«€"
    ];

    function initReasons() {
      const grid = document.getElementById('reasons-grid');
      if (grid) {
        grid.innerHTML = '';
        reasons.forEach((reason, index) => {
          const card = document.createElement('div');
          card.className = 'card memory-card rounded-xl relative';
          if (index >= unlockedCount) card.classList.add('reason-locked');
          card.style.opacity = index < unlockedCount ? '1' : '0.5';
          
          card.innerHTML = `
            <div class="absolute inset-0 flex items-center justify-center bg-gradient-to-br from-pink-100 to-pink-200 rounded-xl text-4xl front ${index < unlockedCount ? '' : 'hidden'}">
              ${index + 1}
            </div>
            <div class="absolute inset-0 flex items-center justify-center p-4 text-sm ${index < unlockedCount ? 'hidden-memory' : ''} back text-gray-700 rounded-xl bg-white/95 backdrop-blur-sm">
              ${reason}
            </div>
          `;
          
          card.addEventListener('click', function(e) {
            if (index < unlockedCount) {
              const front = this.querySelector('.front');
              const back = this.querySelector('.back');
              front.classList.toggle('hidden');
              back.classList.toggle('hidden-memory');
              
              if (!back.classList.contains('hidden-memory')) {
                createConfetti(10);
                heartConfetti(5);
                if (window.navigator.vibrate) window.navigator.vibrate(20);
              }
            } else {
              alert(`âœ¨ Keep collecting hearts to unlock reason #${index + 1}! âœ¨`);
            }
          });
          
          grid.appendChild(card);
        });
      }
      updateProgressMeter();
    }

    // ============================================
    // â¤ï¸ CONFETTI (Legacy)
    // ============================================
    function createConfetti(count = 20) {
      const emojis = ['â¤ï¸', 'ğŸ’–', 'ğŸ’•', 'ğŸ’—', 'ğŸ’“', 'ğŸŒ¸', 'âœ¨', 'ğŸ€'];
      for (let i = 0; i < count; i++) {
        setTimeout(() => {
          const confetti = document.createElement('div');
          confetti.innerHTML = emojis[Math.floor(Math.random() * emojis.length)];
          confetti.style.position = 'fixed';
          confetti.style.left = Math.random() * 100 + 'vw';
          confetti.style.top = '-10px';
          confetti.style.fontSize = (Math.random() * 25 + 15) + 'px';
          confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear`;
          confetti.style.pointerEvents = 'none';
          confetti.style.zIndex = '9999';
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 5000);
        }, i * 50);
      }
    }

    // ============================================
    // ğŸ SURPRISE BUTTON
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      const surpriseBtn = document.getElementById('surprise-btn');
      if (surpriseBtn) {
        surpriseBtn.addEventListener('click', function() {
          createConfetti(100);
          heartConfetti(100);
          unlockReason();
          unlockReason();
          
          const msg = document.createElement('div');
          msg.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-8 rounded-3xl shadow-2xl z-50 text-center';
          msg.style.animation = 'float 3s ease infinite';
          msg.innerHTML = `
            <span class="text-6xl block mb-4 heartbeat">ğŸ</span>
            <h3 class="text-2xl font-bold text-pink-500 mb-2">SURPRISE!</h3>
            <p class="text-gray-600">you're the best thing that ever happened to me ğŸ¥¹</p>
            <p class="text-gray-400 text-sm mt-4">now go smile you beautiful human</p>
          `;
          document.body.appendChild(msg);
          setTimeout(() => msg.remove(), 4000);
        });
      }
    });

    // ============================================
    // â° COUNTDOWN TIMER
    // ============================================
    function initCountdown() {
      const nextVisit = new Date('March 15, 2026 10:00:00').getTime();
      
      function updateCountdown() {
        const now = new Date().getTime();
        const diff = nextVisit - now;
        
        const daysEl = document.getElementById('days');
        const hoursEl = document.getElementById('hours');
        const minutesEl = document.getElementById('minutes');
        const secondsEl = document.getElementById('seconds');
        
        if (!daysEl || !hoursEl || !minutesEl || !secondsEl) return;
        
        if (diff > 0) {
          const days = Math.floor(diff / (1000 * 60 * 60 * 24));
          const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((diff % (1000 * 60)) / 1000);
          
          daysEl.textContent = days;
          hoursEl.textContent = hours.toString().padStart(2, '0');
          minutesEl.textContent = minutes.toString().padStart(2, '0');
          secondsEl.textContent = seconds.toString().padStart(2, '0');
        }
      }
      
      updateCountdown();
      setInterval(updateCountdown, 1000);
    }

    // ============================================
    // ğŸ‘¶ FUTURE KIDS
    // ============================================
    const FUTURE_KIDS_DATA = {
      min: 1, max: 5, defaultCount: 2,
      girlNames: ["Zyaire", "Iris", "Nova", "Hazel", "Willow", "Stella", "Violet", "June", "Clementine", "Daisy", "Ruby", "Ivy", "Penelope", "Aurora", "Lily"],
      boyNames: ["Zyren", "Jeff", "Finn", "Theo", "Milo", "Max", "Silas", "Arlo", "Lewis", "August", "River", "Atlas", "Jude", "Otis", "Wren"],
      specialNames: ["Sage", "Riley", "Quinn", "Rowan", "Emerson", "Morgan", "Avery", "Blake", "Casey", "Jordan"],
      letters: [
        "dear little one, your mom is the reason i believe in magic. i hope you have her laugh, her heart, and her ability to make a home out of anywhere. ğŸŒ™",
        "to our future babies: i didn't know i could love someone i haven't met yet, but here we are. your mom already talks about you in her sleep. ğŸ¥¹",
        "hey tiny human, your mom's kindness is gonna be your superpower. also, get ready for unlimited cuddles and dad jokes. ğŸ“¼",
        "psst, future kid: your mom cried watching a dog adoption commercial yesterday. you're gonna be so loved it's insane. ğŸ¾",
        "dear baby [last name], your mom has been practicing her lullabies. they're terrible. it's adorable. ğŸµ",
        "to our mini us: your mom's patience is endless. she waited for me, and she'll wait for you too. you're worth every second. â³",
        "future child, your mom already has a photo album ready for you. it's called 'reasons to smile.' you're already in it. ğŸ“¸"
      ],
      herInspirations: {
        middleName: "Marie", momName: "Patricia", favoriteFlower: "Peony", birthFlower: "Rose", favoriteCity: "Paris", favoriteCharacter: "Elle Woods"
      }
    };

    let currentKidCount = FUTURE_KIDS_DATA.defaultCount;
    let currentGenderMix = 'balanced';
    let kidsUnlocked = false;
    let unlockAttempts = 0;
    const SECRET_UNLOCK_NUMBER = 3;

    function initFutureKidsSection() {
      const section = document.getElementById('future-kids-section');
      if (!section) return;
      
      setTimeout(() => {
        section.style.opacity = '1';
        section.style.transform = 'translateY(0)';
      }, 1500);
      
      const unlockBtn = document.getElementById('unlock-kids-btn');
      if (unlockBtn) {
        unlockBtn.addEventListener('click', function() {
          unlockAttempts++;
          if (unlockAttempts >= SECRET_UNLOCK_NUMBER) {
            unlockKidsSection();
          } else {
            const hints = ["not yet... try again! ğŸ¼", "almost there... ğŸ¤", `one more time! (${unlockAttempts}/${SECRET_UNLOCK_NUMBER}) âœ¨`];
            this.textContent = hints[unlockAttempts - 1] || "tap to unlock ğŸ‘†";
            this.classList.add('shake');
            setTimeout(() => this.classList.remove('shake'), 500);
            createConfetti(5);
            heartConfetti(3);
          }
        });
      }
      
      const rattle = document.getElementById('baby-rattle');
      if (rattle) {
        let shakeCount = 0;
        rattle.addEventListener('click', function() {
          shakeCount++;
          this.style.animation = 'shake 0.5s ease';
          setTimeout(() => this.style.animation = '', 500);
          if (shakeCount === 3) {
            alert('ğŸ‘¶ğŸ§¸ "i hope they have your eyes" â€” future dad energy');
            createConfetti(20);
            heartConfetti(30);
            shakeCount = 0;
          }
        });
      }
      
      document.getElementById('decrease-kids')?.addEventListener('click', function() {
        if (currentKidCount > FUTURE_KIDS_DATA.min) { currentKidCount--; updateKidCount(); }
      });
      document.getElementById('increase-kids')?.addEventListener('click', function() {
        if (currentKidCount < FUTURE_KIDS_DATA.max) { currentKidCount++; updateKidCount(); }
      });
      document.getElementById('gender-toggle')?.addEventListener('change', function(e) {
        currentGenderMix = e.target.checked ? 'more-girls' : 'more-boys';
        updateKidsNames();
      });
      document.getElementById('randomize-letter')?.addEventListener('click', function() {
        const letterEl = document.getElementById('future-kids-letter');
        const randomIndex = Math.floor(Math.random() * FUTURE_KIDS_DATA.letters.length);
        letterEl.style.opacity = '0';
        setTimeout(() => {
          letterEl.textContent = FUTURE_KIDS_DATA.letters[randomIndex];
          letterEl.style.opacity = '1';
        }, 200);
        createConfetti(8);
        heartConfetti(5);
      });
    }

    function unlockKidsSection() {
      if (kidsUnlocked) return;
      kidsUnlocked = true;
      const lockedContent = document.getElementById('kids-locked-content');
      const unlockedContent = document.getElementById('kids-unlocked-content');
      const lockIcon = document.getElementById('kids-lock');
      
      lockedContent.style.opacity = '0';
      setTimeout(() => {
        lockedContent.classList.add('hidden');
        unlockedContent.classList.remove('hidden');
        unlockedContent.style.opacity = '0';
        setTimeout(() => unlockedContent.style.opacity = '1', 50);
        lockIcon.innerHTML = 'ğŸ”“';
      }, 300);
      updateKidCount();
      createConfetti(50);
      heartConfetti(100);
    }

    function updateKidCount() {
      document.getElementById('kid-count').textContent = currentKidCount;
      updateKidsNames();
    }

    function updateKidsNames() {
      const container = document.getElementById('kids-names-container');
      if (!container) return;
      container.innerHTML = '';
      
      for (let i = 0; i < currentKidCount; i++) {
        const nameCard = document.createElement('div');
        nameCard.className = 'bg-white/90 backdrop-blur rounded-2xl p-5 shadow-md hover:shadow-xl transition-all duration-300 transform hover:scale-105';
        
        let name, gender;
        if (currentGenderMix === 'more-girls') gender = Math.random() < 0.7 ? 'girl' : 'boy';
        else if (currentGenderMix === 'more-boys') gender = Math.random() < 0.7 ? 'boy' : 'girl';
        else gender = Math.random() < 0.5 ? 'girl' : 'boy';
        
        if (Math.random() < 0.2) {
          name = FUTURE_KIDS_DATA.specialNames[Math.floor(Math.random() * FUTURE_KIDS_DATA.specialNames.length)];
          gender = 'special';
        } else {
          const nameArray = gender === 'girl' ? FUTURE_KIDS_DATA.girlNames : FUTURE_KIDS_DATA.boyNames;
          name = nameArray[Math.floor(Math.random() * nameArray.length)];
        }
        
        const useMiddleName = Math.random() < 0.4;
        const fullName = useMiddleName ? `${name} ${FUTURE_KIDS_DATA.herInspirations.middleName}` : name;
        const seasons = ['spring', 'summer', 'fall', 'winter'];
        const season = seasons[Math.floor(Math.random() * seasons.length)];
        
        nameCard.innerHTML = `
          <div class="flex items-center justify-between mb-2">
            <span class="text-3xl">${gender === 'girl' ? 'ğŸ‘§' : gender === 'boy' ? 'ğŸ‘¦' : 'ğŸ‘¼'}</span>
            <span class="text-xs px-2 py-1 bg-pink-100 rounded-full text-pink-600">${season} baby</span>
          </div>
          <p class="text-xl font-bold" style="color: #2d2d2d;">${fullName}</p>
          <p class="text-xs text-gray-400 mt-2">${useMiddleName ? 'named after her middle name âœ¨' : 'picked just for you â¤ï¸'}</p>
        `;
        container.appendChild(nameCard);
      }
      
      const inspirationNote = document.createElement('div');
      inspirationNote.className = 'col-span-full text-center text-xs text-gray-400 mt-2';
      inspirationNote.innerHTML = `
        ğŸŒ¸ inspired by her: ${FUTURE_KIDS_DATA.herInspirations.favoriteFlower}, 
        ${FUTURE_KIDS_DATA.herInspirations.favoriteCity}, 
        ${FUTURE_KIDS_DATA.herInspirations.favoriteCharacter}
      `;
      container.appendChild(inspirationNote);
    }

    // ============================================
    // ğŸ’Œ WAX SEAL
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      const seal = document.getElementById('wax-seal');
      if (seal) {
        seal.addEventListener('click', function(e) {
          e.preventDefault();
          this.style.transform = 'scale(0.9)';
          setTimeout(() => this.style.transform = '', 200);
          
          const secretMsg = document.createElement('div');
          secretMsg.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-gradient-to-br from-pink-100 to-white p-10 rounded-3xl shadow-2xl z-50 text-center border-4 border-pink-300';
          secretMsg.style.animation = 'fadeInScale 0.3s ease, float 3s ease infinite';
          secretMsg.innerHTML = `
            <span class="text-7xl block mb-4 heartbeat">ğŸ’Œ</span>
            <h3 class="text-3xl font-bold mb-3" style="color: #ff8da1;">you broke the seal</h3>
            <p class="text-gray-600 text-lg mb-2">so here's the unfiltered truth:</p>
            <p class="text-gray-800 italic text-xl my-4" style="font-family: 'Playfair Display', serif;">
              "i knew i loved you<br>the night you fell asleep on my shoulder<br>and i didn't move for two hours<br>because some moments are worth going numb for."
            </p>
            <button onclick="this.parentElement.remove(); createConfetti(30); heartConfetti(20); unlockReason();" 
                    class="mt-4 px-6 py-2 bg-pink-400 text-white rounded-full hover:bg-pink-500 transition-colors">
              seal it back ğŸ’•
            </button>
          `;
          document.body.appendChild(secretMsg);
          createConfetti(15);
          heartConfetti(10);
          unlockReason();
          setTimeout(() => { if (secretMsg.parentNode) secretMsg.remove(); }, 8000);
        });
      }
    });

    // ============================================
    // ğŸ™ï¸ VOICE NOTE
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      const voiceBtn = document.getElementById('voice-note-btn');
      const voiceAudio = document.getElementById('her-voice');
      
      if (voiceBtn && voiceAudio) {
        voiceBtn.addEventListener('click', function() {
          voiceAudio.play().catch(e => {
            alert('ğŸ™ï¸ "I said yes, obviously." â€” Add your voice file to assets/her-voice.m4a');
          });
          unlockReason();
        });
      }
    });

    // ============================================
    // ğŸ“ NEW: TIMELINE 2.0
    // ============================================
    const defaultTimeline = [
      { title: "the meet", date: "09/07/2025", description: "Bungoma â€” instant butterflies. It was just a normal day. Nothing special about the air. Nothing unusual about the moment. But then you appeared." },
      { title: "the moment", date: "24/05/2025", description: "I knew I loved you the night you fell asleep on my shoulder and I didn't move for two hours. Then was awaken by your beautiful kisses at 2 am." },
      { title: "first date", date: "July 2025", description: "Our first official date. I still remember what you wore. I still remember how my heart wouldn't calm down." }
    ];

    function loadTimeline() {
      const timeline = JSON.parse(localStorage.getItem('timeline') || JSON.stringify(defaultTimeline));
      const container = document.getElementById('timeline-container');
      if (!container) return;
      
      container.innerHTML = timeline.map((entry, index) => `
        <div class="relative flex flex-col md:flex-row ${index % 2 === 0 ? 'md:flex-row-reverse' : ''} items-center gap-4 md:gap-8 timeline-entry p-4 rounded-2xl" data-aos="fade-up">
          <div class="flex-1 text-center md:text-${index % 2 === 0 ? 'left' : 'right'}">
            <span class="text-sm text-pink-400 font-medium">${entry.date}</span>
            <h3 class="text-xl font-bold mt-1" style="color: #ff8da1;">${entry.title}</h3>
            <p class="text-gray-600 mt-2">${entry.description}</p>
          </div>
          <div class="w-12 h-12 bg-pink-100 rounded-full flex items-center justify-center text-2xl flex-shrink-0 heartbeat">${index + 1}</div>
        </div>
      `).join('');
    }

    document.getElementById('add-timeline')?.addEventListener('click', function() {
      const title = document.getElementById('timeline-title').value.trim();
      const date = document.getElementById('timeline-date').value.trim();
      const desc = document.getElementById('timeline-description').value.trim();
      if (!title || !date || !desc) return alert('fill in all fields ğŸ’•');
      
      const timeline = JSON.parse(localStorage.getItem('timeline') || JSON.stringify(defaultTimeline));
      timeline.push({ title, date, description: desc });
      localStorage.setItem('timeline', JSON.stringify(timeline));
      
      document.getElementById('timeline-title').value = '';
      document.getElementById('timeline-date').value = '';
      document.getElementById('timeline-description').value = '';
      loadTimeline();
      heartConfetti(10);
    });

    // ============================================
    // ğŸ’Œ NEW: MONTHLY LETTERS
    // ============================================
    const defaultLetters = {
      "February 2026": "My darling,\n\nBefore you, my world was in grayscale â€” a collection of days strung together like old photographs. Then you arrived, not like a storm, but like dawn: patient, golden, inevitable.\n\nYou are the kind of quiet that fills rooms. Your laugh spills like light through windowpanes, and your heart â€” god, your heart â€” is not content to simply beat; it radiates. It finds stray souls and calls them home.\n\nI love you in the small infinities: the way you tilt your head when you're solving a problem, your post-nap voice still dreaming at the edges, how you remember the names of strangers, the sound you make when something is *really* good, your hands finding mine in the dark.\n\nYou are not my other half â€” that implies we were broken once, incomplete. You are my more. My expansion. The reason my chest has learned a new rhythm. Before you, I loved in lowercase. Now every feeling arrives with capital letters.\n\nSo here is my hand, if you'll still have it. Here is my life, unscripted and uncertain. Here is my heart â€” already yours, just waiting for you to open it.\n\nYours, always,\nMuffin"
    };

    function loadLetters() {
      const letters = JSON.parse(localStorage.getItem('letters') || JSON.stringify(defaultLetters));
      const months = Object.keys(letters);
      const currentMonth = months[months.length - 1];
      
      const monthEl = document.getElementById('current-month');
      const letterEl = document.getElementById('current-letter');
      if (monthEl) monthEl.textContent = currentMonth;
      if (letterEl) letterEl.innerHTML = letters[currentMonth].replace(/\n/g, '<br>');
      
      const archive = document.getElementById('letters-archive');
      if (!archive) return;
      
      archive.innerHTML = months.slice(0, -1).reverse().map(month => `
        <div class="letter-card bg-white/80 backdrop-blur rounded-xl p-4 text-center cursor-pointer hover:shadow-lg transition-all" onclick="showLetter('${month}')">
          <span class="text-3xl block mb-2">ğŸ’Œ</span>
          <p class="font-medium text-sm">${month}</p>
        </div>
      `).join('');
    }

    window.showLetter = function(month) {
      const letters = JSON.parse(localStorage.getItem('letters') || JSON.stringify(defaultLetters));
      alert(letters[month]);
    };

    document.getElementById('save-letter')?.addEventListener('click', function() {
      const newLetter = document.getElementById('new-letter').value.trim();
      if (!newLetter) return alert('write something beautiful ğŸ’Œ');
      
      const letters = JSON.parse(localStorage.getItem('letters') || JSON.stringify(defaultLetters));
      const now = new Date();
      const monthName = now.toLocaleString('default', { month: 'long', year: 'numeric' });
      letters[monthName] = newLetter;
      localStorage.setItem('letters', JSON.stringify(letters));
      
      document.getElementById('new-letter').value = '';
      loadLetters();
      heartConfetti(15);
    });

    // ============================================
    // ğŸŒ± NEW: BUCKET LIST
    // ============================================
    const defaultGoals = [
      { text: "watch sunset in Zanzibar", done: false },
      { text: "cook a meal together from scratch", done: false },
      { text: "take a photo in every city we visit", done: false },
      { text: "spend new years eve somewhere magical", done: false }
    ];

    function loadGoals() {
      const goals = JSON.parse(localStorage.getItem('goals') || JSON.stringify(defaultGoals));
      const list = document.getElementById('goals-list');
      if (!list) return;
      
      list.innerHTML = goals.map((goal, index) => `
        <div class="flex items-center justify-between bg-white p-4 rounded-xl shadow-sm bucket-item">
          <span class="text-gray-800 ${goal.done ? 'line-through text-gray-400' : ''}">${goal.text}</span>
          <button onclick="toggleGoal(${index})" class="text-2xl hover:scale-110 transition-transform">
            ${goal.done ? 'âœ…' : 'â¬œ'}
          </button>
        </div>
      `).join('');
    }

    window.toggleGoal = function(index) {
      const goals = JSON.parse(localStorage.getItem('goals') || JSON.stringify(defaultGoals));
      goals[index].done = !goals[index].done;
      localStorage.setItem('goals', JSON.stringify(goals));
      loadGoals();
      if (goals[index].done) heartConfetti(15);
    };

    document.getElementById('add-goal')?.addEventListener('click', function() {
      const text = document.getElementById('new-goal').value.trim();
      if (!text) return alert('add a dream ğŸŒŸ');
      
      const goals = JSON.parse(localStorage.getItem('goals') || JSON.stringify(defaultGoals));
      goals.push({ text, done: false });
      localStorage.setItem('goals', JSON.stringify(goals));
      
      document.getElementById('new-goal').value = '';
      loadGoals();
      heartConfetti(10);
    });

    // ============================================
    // âœ¨ INITIALIZE EVERYTHING
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      // Original inits
      initPolaroidFlipCards();
      initReasons();
      initFutureKidsSection();
      
      // New inits (will run after unlock via checkPassword)
      // But we also run them here with empty containers
      loadTimeline();
      loadLetters();
      loadGoals();
      
      // Event listeners
      document.getElementById('password-input')?.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') checkPassword();
      });
      
      const noBtn = document.getElementById('no-btn');
      const yesBtn = document.getElementById('yes-btn');
      const response = document.getElementById('valentine-response');
      
      if (noBtn) {
        noBtn.addEventListener('mouseover', function(e) {
          const x = Math.random() * 200 - 100;
          const y = Math.random() * 200 - 100;
          this.style.transform = `translate(${x}px, ${y}px)`;
        });
        noBtn.addEventListener('click', function() { unlockReason(); });
      }
      
      if (yesBtn) {
        yesBtn.addEventListener('click', function() {
          response.classList.remove('hidden');
          createConfetti(50);
          heartConfetti(50);
          this.style.transform = 'scale(1.2)';
          if (noBtn) noBtn.style.opacity = '0.5';
          unlockReason();
          showDanceOverlay();
        });
      }
      
      setTimeout(tryLoadRealImage, 1000);
    });

    // ============================================
    // âœ¨ ANIMATIONS STYLESHEET
    // ============================================
    (function addAnimations() {
      const styleSheet = document.createElement('style');
      styleSheet.textContent = `
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); } }
        @keyframes fadeInScale { 0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); } 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); } }
        @keyframes blink { 0%,50% { opacity: 1; } 51%,100% { opacity: 0; } }
        .animate-blink { animation: blink 1s step-end infinite; }
      `;
      document.head.appendChild(styleSheet);
    })();

    // ============================================
    // ğŸš€ EXPOSE GLOBALS
    // ============================================
    window.checkPassword = checkPassword;
    window.closeLightbox = closeLightbox;
    window.unlockReason = unlockReason;
    window.createConfetti = createConfetti;
    window.heartConfetti = heartConfetti;
    window.closeDanceOverlay = closeDanceOverlay;
    window.showLetter = showLetter;
    window.toggleGoal = toggleGoal;
  </script>
</body>
</html>